#!/bin/bash
#######################################################################################
# 0. Copies dcm files from subject/DICOM folder in RedSlim to 0_MYELIN_DICOM/subject,
# 1. Calls the dcm2nii_multi_nonCDnum matlab script to convert
# * Reference links: https://www.mathworks.com/matlabcentral/answers/16353-run-function-with-input-variable-from-linux-terminal
#             	     https://stackoverflow.com/questions/38723138/matlab-execute-script-from-command-linux-line
# * -nodesktop and -nodisplay: To run it without GUI
# * -nosplash: 
# * -nojvm: Highly recommended, to prevent it from running without java virtual machine (keep RAM consumption low)
# * |tail -n +14: To skip the first 14 lines that are output by matlab's welcome message 
#
# TEMPLATE FORM: matlab -nodesktop -nosplash -r "cd('your directory');function_name('your string');exit"
#
# NOTE. After script is done running, will be in matlab terminal mode and what i type will be invisible. But simply type exit afterwards.
########################################################################################

SRCFOLDER=/media/ws1/NewTera/0_MYELIN_DICOM/200604_PICKUP  #<-CHANGE DATE
DESTFOLDER=/media/ws1/DATA/0_MYELIN_DICOM/200604_PICKUP #<-CHANGE DATE
#mkdir $DESTFOLDER

# 0.
for subj in 16812354_200522 19512987_200508 24844408_200522 31708074_200414 32266713_200506 32489477_200410 32489826_200424 32541539_200428 32551132_200420 32554751_200422 32647266_200527 32656587_200514
	do
	mkdir $DESTFOLDER/$subj
	cp -R $SRCFOLDER/$subj/DICOM/* $DESTFOLDER/$subj
done

# 1.
matlab -nodesktop -nosplash -nojvm -r "cd('/home/ws1/matlab/SUBIN/dcm2nii_linux');dcm2nii_multi_nonCD('/media/ws1/DATA/0_MYELIN_DICOM/200511_PICKUP');exit" |tail -n +14   #<-CHANGE DATE





