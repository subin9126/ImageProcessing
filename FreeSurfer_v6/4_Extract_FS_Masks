#!/bin/bash

export FREESURFER_HOME=/usr/local/freesurfer_6/freesurfer

FSRESULTS_ALL_DIR=/media/fsdb1_mnt/fs_snubh/2_FSRESULTS_V6_ALL

OUTPUT_DIR_WMPARC=/media/fsdb1_mnt/fs_snubh/4_FS_MASKS/WMPARC
OUTPUT_DIR_DESTRIEUX=/media/fsdb1_mnt/fs_snubh/4_FS_MASKS/DESTRIEUX
OUTPUT_DIR_DKT=/media/fsdb1_mnt/fs_snubh/4_FS_MASKS/DKT

T1_ISO_DIR=/media/fsdb1_mnt/fs_snubh/1_T1_isonii

SUBJECT_FOLDERS=(23418642_140620 23502035_181130 23576656_180420 23622326_190527 23625642_190705 23658750_141212 23677395_161228 23729537_190327 23734250_180712 23795293_200123 23843572_141202 23894734_181221 24013925_180529 24036562_141208 24164070_190129 24356684_150417 24433303_200102 24453408_161014 24488086_181109 24769406_170921 24840499_200311 25001831_150915 25020919_170523 25024942_180202 25032107_180329 25040393_200213 25047217_190716 25049965_161103 25063459_181005 25068113_160402 25167281_181204 25203233_190207 25205037_151106 25208911_180824 25255575_181130 25278941_190724 25297726_190124 25314265_190402 25337080_181112 25343148_191113 25397587_181127 25421170_190729 25466748_190409 25487916_160307 25535288_190215 25560190_190724 25595088_170519 25655339_160307 25713723_160920 25715666_180618 25717314_160328 25749366_190805 25755145_160408 25804155_181130 25828670_170413 25835818_160411 25911255_160715 25920918_160824 25943036_180328 25998702_160623 26134905_170421 26162854_181026 26196105_160919 26223083_190122 26244097_190605 26245069_190328 26254599_181112 26270692_180208 26280860_190128 26305497_190128 26309901_161129 26330811_181026 26340382_190325 26340438_190227 26354994_180919 26355702_190213 26371216_181226 26374417_160819 26380450_170117 26382007_161209 26402211_190412 26457381_161014 26457956_190321 26480242_171019 26492168_181218 26502700_160722 26515915_161125 26516716_161017 26516716_181231 26524173_181012 26565408_170712 26580748_161013 26580748_171020 26615271_190128 26686158_180829 26701879_190130 26736318_180430 26767420_170117 26792123_161209 26795083_170113 26903606_191122 26905152_161028 26906092_170803 26907196_180504 26922791_181010 26922962_181219 26957634_171221 27035049_181211 27066098_170103 27109469_170524 27129300_171010 27200627_170207 27205071_161230 27211982_170530 27227615_170317 27402997_181219 27421479_170227 27440805_181213 27498710_170614 27517680_170425 27525117_170403 27548994_170721 27562628_170928 27576759_190617 27617472_191125 27650347_170516 27716557_171031 27821459_180102 27867277_170901 27876581_180703 27890215_170728 28066697_181207 28158983_171124 28270465_171120 28272841_171129 28292186_171113 28324278_171110 28390237_180117 28424541_171128 28426756_171121 28442455_181102 28455381_171020 28505635_180110 28506436_180131 28527231_180102 28565187_180213 28573948_200212 28608060_180313 28614577_180509 28641788_180831 28654931_180206 28697868_180115 28703509_180307 28752594_180403 28801319_180403 28822099_180308 28825478_191207 28870973_180410 28886961_180307 28889953_180227 28914765_180202 29060894_180530 29072051_180511 29087541_180413 29095852_180430 29115600_180615 29127658_190723 29173000_180405 29179666_180413 29194742_181016 29200988_190130 29211034_190325 29229725_180620 29272642_181012 29283495_180827 29286449_180919 29290640_180814 29363137_181130 29373172_180531 29378906_180712 29405769_190320 29410886_190225 29462832_190121 29476451_180626 29494372_181004 29507425_190607 29525238_180808 29561823_190107 29562237_181204 29576313_180928 29591057_181128 29662865_190111 29679832_191213 29697171_181114 29818156_181120 29827011_181024 29843330_180912 29903054_190711 29993901_190227 30001864_181023 30014055_191025 30016037_190308 30027695_190326 30050208_181018 30075656_181112 30096235_190117 30101029_190329 30122785_190111 30125373_181106 30169195_190705 30252934_181224 30253014_181211 30255212_181213 30255281_181228 30255298_181217 30255320_181214 30255351_181214 30263321_181130 30265497_181214 30271492_181226 30275627_181224 30275634_181224 30287930_181218 30288313_181218 30332955_181217 30357031_181224 30375123_190327 30399523_190112 30399554_190112 30590294_190403 30689567_190716 30690860_191118 30735941_190806 30851975_190423 30879764_190906 30884951_190411 30912368_191010 30930498_190614 31003508_190531 31006576_190604 31040994_191209 31041269_191105 31041803_190524 31061667_190628 31098289_200131 31210142_190724 31236548_191122 31254591_190909 31257057_200117 31307370_190706 31414317_191231 31484020_200214 31687230_191002 31739023_191129 31739256_191017 31793661_191121 31858520_191128 31889384_191028 32041286_191218 32123063_200117 32136348_191216 32230411_200407)

###################################################################################
source $FREESURFER_HOME/SetUpFreeSurfer.sh
SUBJECTS_DIR=/media/fsdb1_mnt/fs_snubh/2_FSRESULTS_V6_ALL

for idx in ${!SUBJECT_FOLDERS[*]}

	do

	subj=${SUBJECT_FOLDERS[$idx]}

	cd $FSRESULTS_ALL_DIR/"r"$subj/mri
	
	mri_convert -i wmparc.mgz -o $OUTPUT_DIR_WMPARC/"r"$subj"_wmparc".nii \
			-rt nearest -rl $T1_ISO_DIR/"r"$subj"_T1".nii

	mri_convert -i aparc.a2009s+aseg.mgz -o $OUTPUT_DIR_DESTRIEUX/"r"$subj"_a2009s".nii \
			-rt nearest -rl $T1_ISO_DIR/"r"$subj"_T1".nii

	mri_convert -i aparc.DKTatlas+aseg.mgz -o $OUTPUT_DIR_DKT/"r"$subj"_dkt".nii \
			-rt nearest -rl $T1_ISO_DIR/"r"$subj"_T1".nii

done




